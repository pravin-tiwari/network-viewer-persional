{"version":3,"file":"ImportHAR.js","sources":["../../../src/Components/Import/ImportHAR.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useDropzone } from 'react-dropzone';\n\nimport { useNetwork } from './../../state/network/Context';\nimport Styles from './ImportHAR.styles.scss';\nimport Button from './../Common/Button';\n\nconst DROP_FILE_CONFIG = {\n  accept: '.har',\n  multiple: false,\n};\n\nconst ImportHar = ({ showButton, className }) => {\n  const { actions } = useNetwork();\n  const { updateErrorMessage } = actions;\n\n  const prepareData = (newNetworkData) => (\n    actions.updateData({\n      entries: newNetworkData.log.entries,\n      pages: newNetworkData.log.pages,\n    })\n  );\n\n  const onDrop = (files) => {\n    const reader = new FileReader();\n    reader.onabort = () => updateErrorMessage({ title: 'file reading was aborted' });\n    reader.onerror = () => updateErrorMessage({ title: 'file reading has failed' });\n    reader.onload = () => {\n      try {\n        const data = JSON.parse(reader.result);\n        prepareData(data);\n      } catch (error) {\n        updateErrorMessage({ title: 'Error while parsing HAR file' });\n      }\n    };\n    reader.readAsText(files[0]);\n  };\n\n  const { getRootProps, getInputProps } = useDropzone({\n    ...DROP_FILE_CONFIG,\n    onDrop,\n  });\n\n  return (\n    <div {...getRootProps()}>\n      <input {...getInputProps()} />\n      {showButton ? (\n        <Button\n          category=\"default\"\n          className={className}\n          material\n          raised\n          size=\"sm\"\n        >\n          Import HAR\n        </Button>\n      ) : (\n        <p className={Styles['drag-drop']}>Drag and drop HAR file here, or click to select file</p>\n      )}\n    </div>\n  );\n};\n\nImportHar.propTypes = {\n  className: PropTypes.string,\n  showButton: PropTypes.bool,\n};\n\nImportHar.defaultProps = {\n  className: null,\n  showButton: true,\n};\n\nexport default ImportHar;\n"],"names":["DROP_FILE_CONFIG","accept","multiple","ImportHar","showButton","className","useNetwork","actions","updateErrorMessage","prepareData","newNetworkData","updateData","entries","log","pages","onDrop","files","reader","FileReader","onabort","title","onerror","onload","data","JSON","parse","result","error","readAsText","useDropzone","getRootProps","getInputProps","Styles","propTypes","PropTypes","string","bool","defaultProps"],"mappings":";;;;;;;;AAQA,IAAMA,gBAAgB,GAAG;AACvBC,EAAAA,MAAM,EAAE,MADe;AAEvBC,EAAAA,QAAQ,EAAE;AAFa,CAAzB;;IAKMC,SAAS,GAAG,SAAZA,SAAY,OAA+B;AAAA,MAA5BC,UAA4B,QAA5BA,UAA4B;AAAA,MAAhBC,SAAgB,QAAhBA,SAAgB;;AAAA,oBAC3BC,UAAU,EADiB;AAAA,MACvCC,OADuC,eACvCA,OADuC;;AAAA,MAEvCC,kBAFuC,GAEhBD,OAFgB,CAEvCC,kBAFuC;;AAI/C,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,cAAD;AAAA,WAClBH,OAAO,CAACI,UAAR,CAAmB;AACjBC,MAAAA,OAAO,EAAEF,cAAc,CAACG,GAAf,CAAmBD,OADX;AAEjBE,MAAAA,KAAK,EAAEJ,cAAc,CAACG,GAAf,CAAmBC;AAFT,KAAnB,CADkB;AAAA,GAApB;;AAOA,MAAMC,MAAM,GAAG,SAATA,MAAS,CAACC,KAAD,EAAW;AACxB,QAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AACAD,IAAAA,MAAM,CAACE,OAAP,GAAiB;AAAA,aAAMX,kBAAkB,CAAC;AAAEY,QAAAA,KAAK,EAAE;AAAT,OAAD,CAAxB;AAAA,KAAjB;;AACAH,IAAAA,MAAM,CAACI,OAAP,GAAiB;AAAA,aAAMb,kBAAkB,CAAC;AAAEY,QAAAA,KAAK,EAAE;AAAT,OAAD,CAAxB;AAAA,KAAjB;;AACAH,IAAAA,MAAM,CAACK,MAAP,GAAgB,YAAM;AACpB,UAAI;AACF,YAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWR,MAAM,CAACS,MAAlB,CAAb;AACAjB,QAAAA,WAAW,CAACc,IAAD,CAAX;AACD,OAHD,CAGE,OAAOI,KAAP,EAAc;AACdnB,QAAAA,kBAAkB,CAAC;AAAEY,UAAAA,KAAK,EAAE;AAAT,SAAD,CAAlB;AACD;AACF,KAPD;;AAQAH,IAAAA,MAAM,CAACW,UAAP,CAAkBZ,KAAK,CAAC,CAAD,CAAvB;AACD,GAbD;;AAX+C,qBA0BPa,WAAW,mCAC9C7B,gBAD8C;AAEjDe,IAAAA,MAAM,EAANA;AAFiD,KA1BJ;AAAA,MA0BvCe,YA1BuC,gBA0BvCA,YA1BuC;AAAA,MA0BzBC,aA1ByB,gBA0BzBA,aA1ByB;;AA+B/C,sBACE,2BAASD,YAAY,EAArB,eACE,6BAAWC,aAAa,EAAxB,CADF,EAEG3B,UAAU,gBACT,oBAAC,MAAD;AACE,IAAA,QAAQ,EAAC,SADX;AAEE,IAAA,SAAS,EAAEC,SAFb;AAGE,IAAA,QAAQ,MAHV;AAIE,IAAA,MAAM,MAJR;AAKE,IAAA,IAAI,EAAC;AALP,kBADS,gBAWT;AAAG,IAAA,SAAS,EAAE2B,MAAM,CAAC,WAAD;AAApB,4DAbJ,CADF;AAkBD;;AAED7B,SAAS,CAAC8B,SAAV,GAAsB;AACpB5B,EAAAA,SAAS,EAAE6B,SAAS,CAACC,MADD;AAEpB/B,EAAAA,UAAU,EAAE8B,SAAS,CAACE;AAFF,CAAtB;AAKAjC,SAAS,CAACkC,YAAV,GAAyB;AACvBhC,EAAAA,SAAS,EAAE,IADY;AAEvBD,EAAAA,UAAU,EAAE;AAFW,CAAzB;;;;"}